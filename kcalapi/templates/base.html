<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kcal Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body   ass="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="{% url 'homepage' %}">Kcal Tracker</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    {% if user.is_authenticated %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'dashboard' %}">Dashboard</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'foods_list' %}">Food List</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'weight_history' %}">Weight History</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'daily_kcal_summary' %}">Daily Intake Summary</a></li>

                        
                        <li class="nav-item"><a class="nav-link" href="{% url 'userprofile' %}">Profile</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Logout</a></li>
                    {% else %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Login</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">Signup</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <div class="alert 
                    {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
        {% endif %}
    </div>

    <div class="container my-4">
    {% block content %}
        <style>
          /* small, self-contained styles so you get a nicer look without changing base.css */
          .hero {
            padding: 4rem 0;
            background: linear-gradient(180deg, rgba(14,95,70,0.06), rgba(255,255,255,0));
          }
          .hero .title {
            font-size: 2.25rem;
            font-weight: 700;
            line-height: 1.05;
          }
          .pill {
            display:inline-block;
            padding: .25rem .6rem;
            border-radius: 999px;
            font-weight:600;
            background: rgba(14,95,70,0.08);
            color: #0e5f46;
            margin-bottom: .75rem;
          }
          .feature {
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 0 6px 18px rgba(12, 12, 12, 0.04);
            background: #fff;
          }
          .small-muted { font-size: .9rem; color: #6c757d; }
          .countdown { font-weight:700; color:#0e5f46; }
          @media (max-width: 767px) {
            .hero { padding: 2rem 0; }
            .hero .title { font-size: 1.5rem; }
          }
        </style>

        <div class="container hero">
          <div class="row align-items-center">
            <div class="col-lg-7">
              <span class="pill">Nutrinepal</span>
              <h1 class="title mt-2">Track calories. Gain healthy weight. Feel stronger.</h1>
              <p class="lead small-muted mt-3">
                Personalized Kcal tracking and weight gain plans built for Nepali foods.
                Log meals, watch progress, and reach your target weight with confidence.
              </p>
          
              {% if user.is_authenticated %}
                <div class="mt-4 d-flex gap-2">
                  <a href="{% url 'dashboard' %}" class="btn btn-success btn-lg">Open Dashboard</a>
                </div>
            
                <div class="row mt-4 g-3">
                  <div class="col-sm-4">
                    <div class="feature text-center">
                      <div class="small-muted">Daily goal</div>
                      <div class="h4 mt-1">{{ user.profile.daily_target_kcal|default:"3000" }} kcal</div>
                    </div>
                  </div>
                  {% comment %} <div class="col-sm-4">
                    <div class="feature text-center">
                      <div class="small-muted">Today Consume</div>
                      <div class="h4 mt-1">{{user.profile.total_kcal|default:"0" }} kcal</div>
                    </div>
                  </div> {% endcomment %}
                  <div class="col-sm-4">
                    <div class="feature text-center">
                      <div class="small-muted">Weight</div>
                      <div class="h4 mt-1">{{ user.profile.weight_kg|default:"--" }} kg
                        {% comment %} <div class="small-muted">({{ weight_change|default:"0" }} kg this week)</div> {% endcomment %}
                      </div>
                    </div>
                  </div>
                </div>
            
              {% else %}
                <div class="mt-4">
                  <div class="alert alert-light d-flex align-items-center" role="alert">
                    <div class="me-3">
                      <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="#0e5f46" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    </div>
                    <div>
                      <div><strong>Welcome —</strong> please sign in to save your progress and access your dashboard.</div>
                      <div class="small-muted mt-1">You will be redirected in <span id="countdown">5</span> seconds.</div>
                      <div class="mt-3">
                        <a href="{% url 'login' %}" class="btn btn-success btn-sm me-2">Login</a>
                        <a href="{% url 'register' %}" class="btn btn-outline-success btn-sm">Sign up</a>
                        <span class="small-muted ms-3">No account? Sign up — it's free.</span>
                      </div>
                    </div>
                  </div>
                </div>
            
                {# Auto-redirect script: shows countdown and navigates to login after 5s #}
                <script>
                  (function(){
                    var secs = 5;
                    var el = document.getElementById('countdown');
                    var url = "{% url 'login' %}";
                    var interval = setInterval(function(){
                      secs = secs - 1;
                      if (el) el.textContent = secs;
                      if (secs <= 0) {
                        clearInterval(interval);
                        window.location.href = url;
                      }
                    }, 1000);
                  })();
                </script>
            
              {% endif %}
            </div>
        
            <div class="col-lg-5 d-none d-lg-block">
              <div class="feature">
                <h5 class="mb-2">How Nurtinepal helps you</h5>
                <ul class="small-muted mb-3">
                  <li>Extensive Nepali food database (calories, protein, carbs, fat).</li>
                  <li>Daily meal logs and calorie summaries.</li>
                  <li>Track weight history and see progress charts.</li>
                </ul>
            
                <h6 class="small-muted">Quick preview</h6>
                <div class="mt-2">
                  <div class="small-muted">Recent weight history</div>
                  <div class="mt-2" style="height:120px; display:flex; align-items:center; justify-content:center; color:#999;">
                    <!-- small placeholder for a sparkline/graph -->
                    <svg width="100%" height="100%" viewBox="0 0 200 60" preserveAspectRatio="none" aria-hidden="true">
                      <polyline points="0,40 30,30 60,35 90,20 120,25 150,15 180,20 200,10" fill="none" stroke="#0e5f46" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </div>
                  <div class="small-muted mt-2">Open your dashboard for full charts & history.</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <hr>

        <div class="container py-4">
          <div class="row g-4">
            <div class="col-md-4">
              <div class="feature text-center">
                <h5>Meal Logger</h5>
                <p class="small-muted mb-0">Quick-add common Nepali meals (dal, bhaat, tarkari), auto-calc kcal.</p>
              </div>
            </div>
            <div class="col-md-4">
              <div class="feature text-center">
                <h5>Progress Charts</h5>
                <p class="small-muted mb-0">Track weight and calorie trends with exportable charts.</p>
              </div>
            </div>
            <div class="col-md-4">
              <div class="feature text-center">
                <h5>Personal Plans</h5>
                <p class="small-muted mb-0">Weight-gain meal suggestions with daily kcal targets.</p>
              </div>
            </div>
          </div>
        </div>

        <footer class="container py-4 small-muted">
          <div class="d-flex justify-content-between">
            <div>© {{ now.year }} Nutrinepal</div>
            <div>
              <a href="{% url 'weight_history' %}" class="small-muted me-3">About</a>
              <a href="{% url 'weight_history' %}" class="small-muted">Contact</a>
            </div>
          </div>
        </footer> 
    {% endblock %}
    </div>
</body>
</html>
